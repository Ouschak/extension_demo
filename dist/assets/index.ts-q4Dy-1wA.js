import{a as c}from"./api.service-B0GcXazJ.js";console.log("[CreatorShield] Background service worker started");chrome.runtime.onMessage.addListener((r,o,e)=>{if(r.type==="ANALYZE_TEXT")return c.analyzeText(r.payload.text).then(async t=>{var a;t.is_toxic&&(await c.syncData(),await c.logDetection({content:r.payload.text,confidence:t.score,platform:"instagram",url:((a=o.tab)==null?void 0:a.url)||""})),e(t)}).catch(t=>{console.error("Analysis error:",t),e({error:t.message})}),!0;if(r.type==="SEND_FEEDBACK"){const{content:t,platform:a,correction:i}=r.payload;return c.sendFeedback(t,a,i).then(()=>e({success:!0})).catch(()=>e({success:!1})),!0}if(r.type==="GET_ENABLED_STATE")return chrome.storage.local.get("creator-shield-detection-store",t=>{e({enabled:!0})}),!0});
